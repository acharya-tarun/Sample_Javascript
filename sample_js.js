page.open(url, function (status) { pageLoadInstant = new Date().getTime(); if (status !== "success") { console.log("PhantomJS_ERROR:page_load_failed:PhantomJS_ERROR"); phantom.exit(1); } else { waitFor(function() { return (lastNetworkCallInstant !== "" && ((new Date().getTime() - lastNetworkCallInstant) > 2000)) }, function() { onPageReady(); phantom.exit(); }); } });
